#!/bin/bash

set -eo pipefail

DIST_DIR="dist"
ARTIFACTS_DIR="artifacts"

echo "Building"
npm run build

echo "Packaging"
mkdir "${ARTIFACTS_DIR}"
cd "${DIST_DIR}"
zip -r -9 "../${ARTIFACTS_DIR}/git-json-cms-frontend-${TRAVIS_TAG:-master}.zip" *
tar czvf "../${ARTIFACTS_DIR}/git-json-cms-frontend-${TRAVIS_TAG:-master}.tar.gz" *
